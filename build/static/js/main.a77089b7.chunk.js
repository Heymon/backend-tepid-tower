(this["webpackJsonpfrontend-tepid-tower"]=this["webpackJsonpfrontend-tepid-tower"]||[]).push([[0],{27:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),s=r(16),o=r.n(s),l=r(8),i=(r(27),r(1)),c=(r(28),r(3)),u=r(7),d=r(5),p=r(6),m=r(21),g=(r(29),r.p+"static/media/16bitcharacter.156d5fea.jpg"),h=(r(30),r(0)),f=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(h.jsx)("div",{id:"player",style:{transform:"translateY(".concat(this.props.playerInfo.playerTargetY,"px) translateX(").concat(this.props.playerInfo.playerTargetX,"px)"),transition:"".concat(this.props.playerInfo.speed,"s linear")},children:Object(h.jsx)("img",{src:g})})}}]),r}(a.a.Component),j=(r(32),function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={platformId:0},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.setState({platformId:this.props.idKey})}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"platform",id:this.state.platformId,style:{margin:"96px 0 56px ".concat(this.props.xAxis,"%"),width:"60px",height:"10px",backgroundColor:"".concat(this.props.color)}})}}]),r}(a.a.Component)),b=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={currentPlatformId:0,platforms:[],numOfPlatforms:10},e.generatePlatforms=function(){var t=[],r=e.state.currentPlatformId;console.log(r);for(var n=0;n<e.state.numOfPlatforms;n++)r++,t.unshift(Object(h.jsx)(j,{xAxis:e.getRandomPos(81),color:"red",idKey:r},r));return console.log(t),e.setState({platforms:t,currentPlatformId:r}),e.state.platforms},e.getRandomPos=function(e){return Math.floor(Math.random()*(e+1))},e.addPlatform=function(t){var r=e.state.platforms,n=e.state.currentPlatformId;n++;var a=Object(h.jsx)(j,{xAxis:e.getRandomPos(81),color:n<20?"blue":"green",idKey:n},n);console.log("added platform"),r.pop(),r.unshift(a),e.setState({platforms:r,currentPlatformId:n}),console.log(t.scrollTop)},e.setGameAtBegining=function(){console.log("set twice?");var e=document.querySelector(".game");e.scrollTo(0,e.scrollHeight)},e.setEvents=function(){document.addEventListener("DOMContentLoaded",e.setGameAtBegining)},e.resetPlatforms=function(){e.setState({currentPlatformId:0,platforms:[],numOfPlatforms:10}),setTimeout((function(){e.generatePlatforms(),e.setGameAtBegining()}),100)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(e){this.setEvents(),this.generatePlatforms()}},{key:"componentDidUpdate",value:function(e){var t=document.querySelector(".game");t.scrollTop<=100&&this.props.curPlatform>2&&(console.log(this.props),this.addPlatform(t)),!1===e.reset&&this.props.reset&&(console.log("false"),this.resetPlatforms())}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.state.platforms})}}]),r}(a.a.Component),y=r.p+"static/media/Fogo-Animado-png.42248e57.gif";r(33);var v=function(e){return Object(h.jsxs)("div",{className:"deathzone",style:e.display?{display:"flex",marginTop:"".concat(window.innerHeight-50,"px")}:{display:"none",marginTop:"".concat(window.innerHeight-50,"px")},children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})})]})},O=Object(l.b)({key:"userState",default:null}),x=Object(l.b)({key:"gameState",default:!0}),S=Object(l.b)({key:"resetState",default:!1}),w=Object(l.b)({key:"userPoints",default:0});var P=function(e){var t=Object(l.c)(x),r=Object(i.a)(t,2),a=r[0],s=r[1],o=Object(l.c)(S),c=Object(i.a)(o,2),u=(c[0],c[1],Object(l.c)(w)),d=Object(i.a)(u,2),p=d[0],m=d[1],g=Object(n.useRef)();return Object(n.useEffect)((function(){g.current=a})),g.current,Object(n.useEffect)((function(){m(e.points),console.log(p),s(e.status)}),[e]),console.log("this.works"),null},k=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={gameStatus:!0,playerTargetY:0,playerTargetX:0,playerLanded:!0,playerJumping:!1,playerFalling:!1,playerIsLanding:!1,speed:0,jumpGauge:5,gauge:null,curPlatform:null,isScrolling:!1,scrollingFunc:0,scrollingSpeed:5,scrollingAdjustment:5,points:0,movementToggle:!1,movementFunc:0},e.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},e.quaternionToEuler=function(e){var t=0,r=2*(e[3]*e[0]+e[1]*e[2]),n=1-2*(e[0]*e[0]+e[1]*e[1]);Math.atan2(r,n);var a=2*(e[3]*e[1]-e[2]*e[0]);t=Math.abs(a)>=1?Math.PI/2*Math.sign(a):Math.asin(a);var s=2*(e[3]*e[2]+e[0]*e[1]),o=1-2*(e[1]*e[1]+e[2]*e[2]);return Math.atan2(s,o),t.toFixed(3)},e.getPlayerCurPos=function(){var e=document.getElementById("player");return null===e?{x:0,y:0,height:0,width:0}:e.getBoundingClientRect()},e.lateralMove=function(t){console.log("how many times"),e.setState({playerTargetX:t,speed:1.5})},e.stopMovement=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;e.setState({playerTargetX:t.x,speed:r})},e.jump=function(t){if(!1===e.state.playerJumping&&!0===e.state.playerLanded){var r=e.state.playerTargetY+t;e.setState({playerTargetY:r,speed:1.5,playerJumping:!0,playerLanded:!1}),setTimeout((function(){e.land(e.checkAllPlatforms())}),48*e.state.jumpGauge)}},e.land=function(t){var r=document.getElementById("player");e.state.playerIsLanding||(r.addEventListener("transitionend",(function(){console.log("touchedfloorDown"),e.state.curPlatform?(console.log("did land1"),e.setState({playerJumping:!1,playerFalling:!1,playerLanded:!0,playerIsLanding:!1,speed:1.5}),e.state.curPlatform.getAttribute("id")>2&&!e.state.isScrolling&&(console.log(t),e.startScrolling())):(console.log("did land2"),e.setState({playerJumping:!1,playerFalling:!1,playerLanded:!0,playerIsLanding:!1,speed:1.5}),console.log(e.state.playerFalling))}),{once:!0}),e.setState({playerIsLanding:!0}))},e.checkLanding=function(t){var r=e.getPlayerCurPos(),n=t.getBoundingClientRect();if(r.y+r.height<=n.y){if(r.x>n.left&&r.x<n.right||r.x+r.width>n.left&&r.x+r.width<n.right){var a=n.top-r.height;return a-r.y<100?(e.setState({playerTargetX:r.x,playerTargetY:a,curPlatform:t,speed:.2,playerFalling:!0,playerJumping:!1}),t):(e.setState({playerTargetY:a,curPlatform:t,speed:1,playerFalling:!0,playerJumping:!1}),t)}return!1}return!1},e.checkAllPlatforms=function(){for(var t=null,r=document.querySelectorAll(".platform"),n=!1,a=0;a<r.length;a++)if(t=e.checkLanding(r[a])){n=!0;break}if(!n){var s=e.getPlayerCurPos(),o=window.innerHeight-s.height,l=o-s.y;return l<50?(console.log("faster"+l),e.setState({playerTargetY:o,curPlatform:null,speed:.1,playerFalling:!0,playerJumping:!1}),!1):(e.setState({playerTargetY:o,curPlatform:null,speed:1.5,playerFalling:!0,playerJumping:!1}),!1)}return t},e.startScrolling=function(){var t=document.querySelector(".game");if(!e.state.isScrolling){var r=setInterval((function(){if(t.scrollTop-=e.state.scrollingSpeed,e.state.playerJumping);else if(e.state.playerFalling){var r=e.getPlayerCurPos();if(e.state.playerTargetY+e.state.scrollingAdjustment-r.y<20)return void e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment,speed:.1,playerTargetX:r.x});e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment})}else{var n=e.getPlayerCurPos();e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment,speed:0,playerTargetX:n.x})}}),100);e.setState({isScrolling:!0,scrollingFunc:r})}console.log("scrolling")},e.gameOver=function(){var t=document.getElementById("player");clearInterval(e.state.scrollingFunc),t.style.display="none",console.log("gameOver"),e.setState({gameStatus:!1,points:e.state.curPlatform?1e3*e.state.curPlatform.getAttribute("id"):0})},e.resetGame=function(){document.getElementById("player").style.display="block";var t=e.getPlayerCurPos(),r=window.innerWidth/2-t.width/2;console.log(t.height),console.log(window.innerHeight-t.height);var n=window.innerHeight-t.height;e.setState({gameStatus:!0,playerTargetX:r,playerTargetY:n,playerLanded:!0,playerJumping:!1,playerFalling:!1,playerIsLanding:!1,speed:0,jumpGauge:5,gauge:null,curPlatform:null,isScrolling:!1,scrollingFunc:0,scrollingSpeed:5,scrollingAdjustment:5,points:0})},e.controllerJump=function(t){t?e.setState({gauge:setInterval((function(){e.state.jumpGauge<10&&e.setState((function(e){return{jumpGauge:e.jumpGauge+1}}))}),250)}):(clearInterval(e.state.gauge),e.jump(-840),e.setState({gauge:null,jumpGauge:5}))},e.controllerMovementRight=function(t){if(t){var r=window.innerWidth/2+160,n=e.getPlayerCurPos();n.x+n.width>=r?(console.log("should stop; down rightwalldeath"),e.gameOver(),e.stopMovement({x:r-n.width,y:e.state.playerTargetY},0)):e.lateralMove(window.innerWidth)}else{var a=window.innerWidth/2+160,s=e.getPlayerCurPos();s.x+s.width>=a?(console.log("should stop; up rightwalldeath"),e.gameOver(),e.stopMovement({x:a-s.width,y:e.state.playerTargetY},0)):e.stopMovement(e.getPlayerCurPos()),!0===e.state.playerFalling&&e.land(e.checkAllPlatforms())}},e.controllerMovementLeft=function(t){if(t){var r=window.innerWidth/2-160;e.getPlayerCurPos().x<=r?(console.log("should stop; down leftwalldeath"),e.gameOver(),e.stopMovement({x:r,y:e.state.playerTargetY},0)):(!0===e.state.playerFalling&&e.land(e.checkAllPlatforms()),e.lateralMove(0))}else{var n=window.innerWidth/2-160;if(e.getPlayerCurPos().x<=n)return console.log("should stop; up lefttwalldeath"),e.gameOver(),e.stopMovement({x:n,y:e.state.playerTargetY},0);e.stopMovement(e.getPlayerCurPos()),!0===e.state.playerFalling&&(!0===e.state.playerFalling&&e.land(e.checkAllPlatforms()),e.land(e.checkAllPlatforms()))}},e.handleMobileJump=function(){document.querySelector(".game").addEventListener("touchstart",(function(t){null===e.state.gauge&&"I"!==t.target.nodeName&&e.controllerJump(!0)})),document.querySelector(".game").addEventListener("touchend",(function(t){console.log(t),"I"!==t.target.nodeName&&e.controllerJump(!1)})),document.querySelector(".game").addEventListener("touchmove",(function(e){e.preventDefault()}))},e.handleKeyboardMovement=function(){document.addEventListener("keydown",(function(t){"INPUT"!==document.activeElement.nodeName&&("Space"===t.code?(t.preventDefault(),null===e.state.gauge&&e.controllerJump(!0)):"ArrowRight"===t.code?e.controllerMovementRight(!0):"ArrowLeft"===t.code&&e.controllerMovementLeft(!0))})),document.addEventListener("keyup",(function(t){"INPUT"!==document.activeElement.nodeName&&("Space"===t.code?e.controllerJump(!1):"ArrowRight"===t.code?e.controllerMovementRight(!1):"ArrowLeft"===t.code&&e.controllerMovementLeft(!1))}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.mobileCheck()&&Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"gyroscope"})]).then((function(t){if(t.every((function(e){return"granted"===e.state}))){console.log("Permission to use Accelerometer & Gyroscope sensor granted.");var r=new m.a({frequency:30,referenceFrame:"device"});r.start(),r.onreading=function(){var t=e.quaternionToEuler(r.quaternion);if(t>=-.3&&t<=.3){if(e.state.playerTargetX===window.innerWidth)return void e.controllerMovementRight(!1);if(0===e.state.playerTargetX)return void e.controllerMovementRight(!1)}else t>.3?e.controllerMovementRight(!0):t<-.3&&e.controllerMovementLeft(!0)},r.onerror=function(e){return console.log(e.error.name,e.error.message)},e.handleMobileJump()}}));var t=this.getPlayerCurPos(),r=window.innerWidth/2-t.width/2,n=window.innerHeight-t.height;this.setState({playerTargetX:r,playerTargetY:n}),this.handleKeyboardMovement()}},{key:"componentDidUpdate",value:function(e,t){if(console.warn("testingsorry"),console.log(this.props.reset),this.props.reset&&(console.log("reset"),this.state.gameStatus||this.resetGame()),this.state.isScrolling){var r=this.getPlayerCurPos();if(r.y+r.height>=window.innerHeight-25)return console.log("should stop; didupdate bottomdeath"),this.gameOver()}if(this.state.speed<=.2&&(console.log("slowing"),e.playerTargetX!==window.innerWidth&&0!==e.playerTargetX||this.setState({speed:1.5,playerTargetX:e.playerTargetX})),null!==this.state.curPlatform){var n=this.getPlayerCurPos(),a=this.state.curPlatform.getBoundingClientRect();n.x>a.left&&n.x<a.right||n.x+n.width>a.left&&n.x+n.width<a.right||this.state.playerFalling||this.state.playerJumping||!this.state.playerLanded||(this.setState({playerFalling:!0,playerLanded:!1}),this.land(this.checkAllPlatforms()))}}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(P,{status:this.state.gameStatus,points:this.state.points}),Object(h.jsx)(f,{playerInfo:this.state}),Object(h.jsxs)("section",{className:"game",children:[Object(h.jsx)("h1",{className:"inTitle",children:"Tepid Tower"}),Object(h.jsx)("div",{className:"hamburguer--menu",children:Object(h.jsx)("i",{className:"fa fa-bars"})}),Object(h.jsx)(v,{display:this.state.isScrolling}),Object(h.jsx)(b,{status:this.state.gameStatus,curPlatform:this.state.curPlatform?this.state.curPlatform.getAttribute("id"):0,reset:this.props.reset})]})]})}}]),r}(a.a.Component);r(34);var T=function(){return Object(h.jsx)("section",{className:"left--section",children:Object(h.jsx)("h1",{className:"outTitle",children:"Tepid Tower"})})},E=(r(35),"https://tepid-tower.herokuapp.com"),C=function e(){Object(c.a)(this,e)};C.register=function(e){return fetch("".concat(E,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.login=function(e){return fetch("".concat(E,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.show=function(){return fetch("".concat(E,"/profile"),{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.uid)}}).then((function(e){return e.json()}))},C.edit=function(e){return fetch("".concat(E,"/profile/edit"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.addScore=function(e){return fetch("".concat(E,"/profile/addscore"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.addFriend=function(e){return fetch("".concat(E,"/profile/addfriend"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.delete=function(e){return fetch("".concat(E,"/user/delete"),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))};var M=C;var N=function(e){var t=Object(l.c)(x),r=Object(i.a)(t,2),a=(r[0],r[1],Object(l.c)(S)),s=Object(i.a)(a,2),o=s[0],c=s[1],u=Object(n.useRef)();Object(n.useEffect)((function(){u.current=o}));var d=u.current;return Object(n.useEffect)((function(){console.log(o),c(e.reset),console.log("reseting game",d,e,o)}),[e]),null};r(36);var A=function(e){return Object(h.jsxs)("div",{className:"controls--modal modal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"CONTROLS"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"USE THE ARROWS KEY TO MOVE"}),Object(h.jsx)("div",{children:"imageofarrowskeys"})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"USE SPACEBAR TO JUMP... THE LONGER YOU HOLD, THE HIGHER YOU WILL JUMP"}),Object(h.jsx)("div",{children:"imageofspacebar"})]})]})},U=(r(37),function e(){Object(c.a)(this,e)});U.showGlobal=function(){return fetch("".concat("https://tepid-tower.herokuapp.com","/leaderboard/global"),{method:"GET"}).then((function(e){return e.json()}))};var I=U;var L=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),a=r[0],s=r[1];function o(){I.showGlobal().then((function(e){console.log(e.curProfiles);var t=e.curProfiles;s(t),console.log(a)}))}return Object(n.useEffect)((function(){o()}),[]),Object(h.jsxs)("div",{onClick:function(){o()},className:"leaderboard--modal modal",children:[Object(h.jsx)("h2",{children:"LEADERBOARDS"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsxs)("table",{children:[Object(h.jsx)("colgroup",{children:Object(h.jsx)("col",{style:{backgroundColor:"blue",width:"22px"}})}),Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Username"}),Object(h.jsx)("th",{children:"Score"}),Object(h.jsx)("th",{children:"Country"})]})})]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("table",{children:[Object(h.jsx)("colgroup",{children:Object(h.jsx)("col",{span:"1",style:{backgroundColor:"blue",width:"22px"}})}),Object(h.jsx)("tbody",{children:a.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t+1}),Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.highscore}),Object(h.jsx)("td",{children:e.country})]},"L".concat(t))}))})]})})]})]})};r(38);var R=function(e){var t=Object(l.c)(O),r=Object(i.a)(t,2),a=r[0],s=r[1];return Object(n.useEffect)((function(){console.log(a),console.log(e.user),a!==e.user&&(console.log("setttt"),s(e.user))}),[e]),null},q=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={curUser:void 0,friendEmail:"",username:"e",email:"",country:"",password:""},e.createResponseMessage=function(e){console.log(e);var t=document.createElement("p");return t.appendChild(document.createTextNode(e.message)),t.setAttribute("class","".concat(e.type," message")),t},e.clearInput=function(e,t){var r=document.querySelectorAll(".".concat(e," > * > input"));console.log(r);for(var n=0;n<r.length;n++)console.log(r[n]),t?r[n].name===t&&(r[n].value=r[n]["".concat(r[n].name)]=""):r[n].value=r[n]["".concat(r[n].name)]=""},e.handleSubmit=function(t){if(t.stopPropagation(),t.preventDefault(),console.log(t.target.getAttribute("class")),"signup"===t.target.getAttribute("class")){var r=e.state;delete r.friendEmail,delete r.curUser,M.register(r).then((function(t){console.log(t);var r=document.querySelector(".message");if(r&&r.remove(),t.field)return document.querySelector(".signup").appendChild(e.createResponseMessage(t))})),e.setState({password:""}),e.clearInput("signup","password")}else if("login"===t.target.getAttribute("class"))M.login({email:e.state.email,password:e.state.password}).then((function(t){console.log(t);var r=document.querySelector(".message");return r&&r.remove(),t.field?document.querySelector(".login").appendChild(e.createResponseMessage(t)):(e.setState({curUser:t.foundUser,country:t.foundUser.profile.country,username:t.foundUser.profile.username,password:""}),e.clearInput("login"),e.clearInput("signup"),localStorage.setItem("uid",t.signedJwt),e.props.gameStatus||e.props.isReseting?e.props.changeModal("user--modal--logged"):(console.log(e.props.points),M.addScore({score:e.props.points}).then((function(t){return console.log(t),e.props.changeModal("user--modal--logged")})),void e.props.playAgainFunc(null)))}));else if("edit--user"===t.target.getAttribute("class")){var n=document.querySelector(".message");if(n&&n.remove(),e.state.curUser.profile.username===e.state.username&&e.state.curUser.profile.country===e.state.country)return document.querySelector(".edit--user").appendChild(e.createResponseMessage({type:"error",message:"Profile has no changes."}));M.edit({username:e.state.username,country:e.state.country}).then((function(t){if((console.log(t),t.field)&&(document.querySelector(".edit--user").appendChild(e.createResponseMessage(t)),200!==t.status))return;e.setState({curUser:t.updatedUser,country:t.updatedUser.profile.country,username:t.updatedUser.profile.username})}))}else if("add--friend"===t.target.getAttribute("class")){var a=document.querySelector(".message");if(a&&a.remove(),e.state.friendEmail===e.state.curUser.email)return document.querySelector(".add--friend").appendChild(e.createResponseMessage({type:"error",message:"Please enter different email."}));M.addFriend({friendEmail:e.state.friendEmail}).then((function(t){if(console.log(t),t.field)return 200===t.status&&(console.log("hey"),e.clearInput("add--friend"),e.setState({friendEmail:""})),document.querySelector(".add--friend").appendChild(e.createResponseMessage(t))}))}else t.target.classList.contains("logout")?(e.props.changeModal(""),e.setState({curUser:null,country:"",username:"",email:"",password:""}),localStorage.removeItem("uid")):t.target.classList.contains("delete")&&M.delete().then((function(t){if(console.log(t),t.field)return document.querySelector(".edit--user").appendChild(e.createResponseMessage(t));e.props.changeModal(""),e.setState({curUser:null,country:"",username:"",email:"",password:""}),localStorage.removeItem("uid")}))},e}return Object(u.a)(r,[{key:"componentDidUpdate",value:function(e,t){console.log(this.props.user),console.log(t),void 0===this.state.curUser&&null!==this.props.user&&(console.log("setttt"),this.setState({curUser:this.props.user,country:this.props.user.profile.country,username:this.props.user.profile.username,password:""})),this.state.curUser&&("none"===document.querySelector(".user--modal--logged").style.display&&(this.state.curUser.profile.username===this.state.username&&this.state.curUser.profile.country===this.state.country||this.setState({username:this.state.curUser.profile.username,country:this.state.curUser.profile.country})),this.props.user&&this.props.user.profile.highscore!==this.state.curUser.profile.highscore&&this.setState({curUser:this.props.user}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)(h.Fragment,{children:[void 0!==this.state.curUser?Object(h.jsx)(R,{user:this.state.curUser}):"",Object(h.jsxs)("div",{className:"user--modal modal",children:[Object(h.jsxs)("form",{className:"signup",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"USERNAME"}),Object(h.jsx)("input",{type:"text",name:"username",required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.username})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"EMAIL"}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,onChange:function(t){return e.setState({email:t.target.value})},value:this.email})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"COUNTRY"}),Object(h.jsx)("input",{type:"text",name:"country",required:!0,onChange:function(t){return e.setState({country:t.target.value})},value:this.country})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"PASWORD"}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,onChange:function(t){return e.setState({password:t.target.value})},value:this.password})]}),Object(h.jsx)("input",{type:"submit",value:"Register"})]}),Object(h.jsxs)("form",{className:"login",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"EMAIL"}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,onChange:function(t){return e.setState({email:t.target.value})},value:this.email})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"PASWORD"}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,onChange:function(t){return e.setState({password:t.target.value})},value:this.password})]}),Object(h.jsx)("input",{type:"submit",value:"Login"})]})]}),Object(h.jsxs)("div",{className:"user--modal--logged modal",children:[this.state.curUser?Object(h.jsxs)("h2",{children:["HIGHSCORE: ",this.state.curUser.profile.highscore]}):"",Object(h.jsxs)("form",{className:"edit--user",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"USERNAME"}),Object(h.jsx)("input",{type:"text",name:"username",required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"COUNTRY"}),Object(h.jsx)("input",{type:"text",name:"country",required:!0,onChange:function(t){return e.setState({country:t.target.value})},value:this.state.country})]}),Object(h.jsx)("input",{type:"submit",value:"EDIT INFO"})]}),Object(h.jsxs)("form",{className:"add--friend",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("h3",{children:"ADD A FRIEND TO YOUR FRIEND'S LEADERBOARD"}),Object(h.jsx)("input",{type:"email",name:"friendEmail",placeholder:"friend@mail.com",required:!0,onChange:function(t){return e.setState({friendEmail:t.target.value})},value:this.friendEmail})]}),Object(h.jsx)("input",{type:"submit",value:"ADD A FRIEND"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"delete icon",onClick:this.handleSubmit,children:Object(h.jsx)("i",{className:"delete fa fa-trash"})}),Object(h.jsx)("div",{className:"logout icon",onClick:this.handleSubmit,children:Object(h.jsx)("i",{className:"logout  fa fa-sign-out"})})]})]})]})}}]),r}(a.a.Component),F=(r(39),function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:!0===this.props.highscore?"gameover--modal highscore modal":"gameover--modal score modal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"h2--title",children:"THE TOWER HAS YOU NOW!"}),Object(h.jsxs)("div",{children:[!0===this.props.highscore?Object(h.jsxs)("h3",{children:["HIGHSCORE: ",this.props.points]}):Object(h.jsxs)("h3",{children:["SCORE: ",this.props.points]}),Object(h.jsx)("button",{className:"playagain",onClick:this.props.playAgainFunc,children:"PLAY AGAIN"})]})]}),null===this.props.user?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"SIGN UP TO ADD YOU SCORE!"}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:this.props.signUpFunc,children:"SIGNUP/LOGIN"})})]}):Object(h.jsx)("div",{children:Object(h.jsxs)("h2",{children:["You are logged in as ",this.props.user.profile.username," !"]})})]})}}]),r}(a.a.Component)),D=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={reset:!1,curUser:null,friendEmail:"",highscore:!1},e.userModal=function(t){var r=!1,n=document.querySelectorAll(".modal");"user--modal--logged"===t&&M.show().then((function(t){console.log(t),e.setState({curUser:t.curUser})}));for(var a=0;a<n.length;a++)if("flex"===n[a].style.display){console.log("is on"),r=!0;break}console.log(t);for(var s=0;s<n.length;s++)if(n[s].classList.contains(t))if("flex"===n[s].style.display){n[s].style.display="none",console.log("off!"),document.querySelector(".landing").removeEventListener("click",e.handleMenuOff);var o=document.querySelector(".message");o&&o.remove()}else n[s].style.display="flex",r||"gameover--modal"===t?r&&"gameover--modal"===t&&document.querySelector(".landing").removeEventListener("click",e.handleMenuOff):(console.log("check"),document.querySelector(".landing").addEventListener("click",e.handleMenuOff));else{n[s].style.display="none";var l=document.querySelector(".message");l&&l.remove()}},e.handleUserOpt=function(t){t.stopPropagation(),e.props.gameStatus&&(e.props.user?(console.log(t.target),e.userModal("user--modal--logged")):(console.log(t.target),e.userModal("user--modal")))},e.handleLeaderboardOpt=function(t){t.stopPropagation(),e.props.gameStatus&&e.userModal("leaderboard--modal")},e.handleControlsOpt=function(t){t.stopPropagation(),e.props.gameStatus&&e.userModal("controls--modal")},e.handleGameRestart=function(t){console.log(t),t&&t.stopPropagation(),e.setState({reset:!0}),e.userModal(""),console.log(e.state.reset)},e.handleHamburguerMenu=function(t){t.preventDefault(),console.log(t.target);var r=t.target.parentElement,n=window.getComputedStyle(r);if(console.log(n.display),"block"===n.display){r.style.display="none";var a=document.querySelectorAll(".icon");console.log(a);for(var s=0;s<a.length;s++)a[s].style.display="inline";document.querySelector(".landing").addEventListener("click",e.handleMenuOff)}},e.handleMenuOff=function(t){if(console.log(t.target.nodeName),console.log(t.target.closest(".modal")),"I"!==t.target.nodeName&&null===t.target.closest(".modal")){var r=document.querySelector(".hamburguer--menu");e.userModal(""),console.log(t.target);var n=document.querySelectorAll(".icon--menu");console.log(n);for(var a=0;a<n.length;a++)n[a].style.display=null;r.style.display=null,document.querySelector(".landing").removeEventListener("click",e.handleMenuOff),console.log("off?")}},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.querySelector(".hamburguer--menu").addEventListener("touchstart",this.handleHamburguerMenu)}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.user!==e.user&&(console.log("humm"),this.setState({curUser:this.props.user})),console.log(this.props),console.log(this.state),this.props.gameStatus||this.state.reset)this.props.gameStatus&&this.state.reset&&this.setState({reset:!1});else{var r=document.querySelector(".user--modal"),n=document.querySelector(".gameover--modal");if("flex"===r.style.display||"flex"===n.style.display)return;console.log("gameover"),console.log(this.props.points),this.props.user?M.addScore({score:this.props.points}).then((function(e){console.log(e),"score"===e.message?t.setState({highscore:!1}):"highscore"===e.message&&t.setState({highscore:!0,curUser:e.updatedUser})})):this.setState({highscore:!0}),this.userModal("gameover--modal")}}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("section",{className:"section--right",children:[Object(h.jsxs)("aside",{className:"aside--top",children:[Object(h.jsx)("div",{className:"icon icon--menu",children:Object(h.jsx)("i",{className:"fa fa-cog"})}),Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleLeaderboardOpt,children:Object(h.jsx)("i",{className:"fa fa-trophy"})}),Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleControlsOpt,children:Object(h.jsx)("i",{className:"fa fa-gamepad fa-lg"})})]}),Object(h.jsx)("aside",{className:"aside--bottom",children:Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleUserOpt,children:Object(h.jsx)("i",{className:"fa fa-user"})})}),Object(h.jsx)(N,{reset:this.state.reset}),Object(h.jsx)(L,{}),Object(h.jsx)(A,{}),Object(h.jsx)(q,{user:this.state.curUser,points:this.props.points,gameStatus:this.props.gameStatus,isReseting:this.state.reset,submitHandler:this.handleSubmit,changeModal:function(t){return e.userModal(t)},playAgainFunc:this.handleGameRestart}),Object(h.jsx)(F,{points:this.props.points,highscore:this.state.highscore,user:this.props.user,playAgainFunc:this.handleGameRestart,signUpFunc:function(){return e.userModal("user--modal")}})]})}}]),r}(a.a.Component);var Y=function(){var e=Object(l.c)(O),t=Object(i.a)(e,2),r=t[0],a=t[1],s=Object(l.c)(x),o=Object(i.a)(s,2),c=o[0],u=(o[1],Object(l.c)(S)),d=Object(i.a)(u,2),p=d[0],m=(d[1],Object(l.c)(w)),g=Object(i.a)(m,2),f=g[0];return g[1],console.log(p),Object(n.useEffect)((function(){console.log(c),localStorage.uid&&M.show().then((function(e){a(e.curUser)}))}),[]),Object(h.jsxs)("div",{className:"landing",children:[Object(h.jsx)(T,{}),Object(h.jsx)(k,{reset:p}),Object(h.jsx)(D,{user:r,gameStatus:c,points:f})]})},J=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,41)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),s(e),o(e)}))};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(l.a,{children:Object(h.jsx)(Y,{})})}),document.getElementById("root")),J()}},[[40,1,2]]]);
//# sourceMappingURL=main.a77089b7.chunk.js.map