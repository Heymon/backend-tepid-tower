(this["webpackJsonpfrontend-tepid-tower"]=this["webpackJsonpfrontend-tepid-tower"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(16),o=n.n(s),l=n(8),i=(n(27),n(1)),c=(n(28),n(3)),u=n(7),d=n(5),p=n(6),g=n(21),m=(n(29),n.p+"static/media/16bitcharacter.156d5fea.jpg"),h=(n(30),n(0)),f=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{id:"player",style:{transform:"translateY(".concat(this.props.playerInfo.playerTargetY,"px) translateX(").concat(this.props.playerInfo.playerTargetX,"px)"),transition:"".concat(this.props.playerInfo.speed,"s linear")},children:Object(h.jsx)("img",{src:m})})}}]),n}(a.a.Component),j=(n(32),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={platformId:0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({platformId:this.props.idKey})}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"platform",id:this.state.platformId,style:{margin:"96px 0 56px ".concat(this.props.xAxis,"%"),width:"60px",height:"10px",backgroundColor:"".concat(this.props.color)}})}}]),n}(a.a.Component)),b=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={currentPlatformId:0,platforms:[],numOfPlatforms:10},e.generatePlatforms=function(){var t=[],n=e.state.currentPlatformId;console.log(n);for(var r=0;r<e.state.numOfPlatforms;r++)n++,t.unshift(Object(h.jsx)(j,{xAxis:e.getRandomPos(81),color:"red",idKey:n},n));return console.log(t),e.setState({platforms:t,currentPlatformId:n}),e.state.platforms},e.getRandomPos=function(e){return Math.floor(Math.random()*(e+1))},e.addPlatform=function(t){var n=e.state.platforms,r=e.state.currentPlatformId;r++;var a=Object(h.jsx)(j,{xAxis:e.getRandomPos(81),color:r<20?"blue":"green",idKey:r},r);console.log("added platform"),n.pop(),n.unshift(a),e.setState({platforms:n,currentPlatformId:r}),console.log(t.scrollTop)},e.setGameAtBegining=function(){console.log("set twice?");var e=document.querySelector(".game");e.scrollTo(0,e.scrollHeight)},e.setEvents=function(){document.addEventListener("DOMContentLoaded",e.setGameAtBegining)},e.resetPlatforms=function(){e.setState({currentPlatformId:0,platforms:[],numOfPlatforms:10}),setTimeout((function(){e.generatePlatforms(),e.setGameAtBegining()}),100)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(e){this.setEvents(),this.generatePlatforms()}},{key:"componentDidUpdate",value:function(e){var t=document.querySelector(".game");t.scrollTop<=100&&this.props.curPlatform>2&&(console.log(this.props),this.addPlatform(t)),!1===e.reset&&this.props.reset&&(console.log("false"),this.resetPlatforms())}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.state.platforms})}}]),n}(a.a.Component),y=n.p+"static/media/Fogo-Animado-png.42248e57.gif";n(33);var v=function(e){return Object(h.jsxs)("div",{className:"deathzone",style:e.display?{display:"flex",marginTop:"".concat(window.innerHeight-50,"px")}:{display:"none",marginTop:"".concat(window.innerHeight-50,"px")},children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:y})})]})},O=Object(l.b)({key:"userState",default:null}),x=Object(l.b)({key:"gameState",default:!0}),S=Object(l.b)({key:"resetState",default:!1}),w=Object(l.b)({key:"userPoints",default:0});var P=function(e){var t=Object(l.c)(x),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(l.c)(S),c=Object(i.a)(o,2),u=(c[0],c[1],Object(l.c)(w)),d=Object(i.a)(u,2),p=d[0],g=d[1],m=Object(r.useRef)();return Object(r.useEffect)((function(){m.current=a})),m.current,Object(r.useEffect)((function(){g(e.points),console.log(p),s(e.status)}),[e]),console.log("this.works"),null},T=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={gameStatus:!0,playerTargetY:0,playerTargetX:0,playerLanded:!0,playerJumping:!1,playerFalling:!1,playerIsLanding:!1,speed:0,jumpGauge:5,gauge:null,curPlatform:null,isScrolling:!1,scrollingFunc:0,scrollingSpeed:5,scrollingAdjustment:5,points:0,movementToggle:!1,movementFunc:0},e.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},e.quaternionToEuler=function(e){var t=0,n=2*(e[3]*e[0]+e[1]*e[2]),r=1-2*(e[0]*e[0]+e[1]*e[1]);Math.atan2(n,r);var a=2*(e[3]*e[1]-e[2]*e[0]);t=Math.abs(a)>=1?Math.PI/2*Math.sign(a):Math.asin(a);var s=2*(e[3]*e[2]+e[0]*e[1]),o=1-2*(e[1]*e[1]+e[2]*e[2]);return Math.atan2(s,o),t.toFixed(3)},e.getPlayerCurPos=function(){var e=document.getElementById("player");return null===e?{x:0,y:0,height:0,width:0}:e.getBoundingClientRect()},e.lateralMove=function(t){console.log("how many times"),e.setState({playerTargetX:t,speed:1.5})},e.stopMovement=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;e.setState({playerTargetX:t.x,speed:n})},e.jump=function(t){if(!1===e.state.playerJumping&&!0===e.state.playerLanded){var n=e.state.playerTargetY+t;e.setState({playerTargetY:n,speed:1.5,playerJumping:!0,playerLanded:!1}),setTimeout((function(){e.land(e.checkAllPlatforms())}),48*e.state.jumpGauge)}},e.land=function(t){var n=document.getElementById("player");e.state.playerIsLanding||(n.addEventListener("transitionend",(function(){console.log("touchedfloorDown"),e.state.curPlatform?(console.log("did land1"),e.setState({playerJumping:!1,playerFalling:!1,playerLanded:!0,playerIsLanding:!1,speed:1.5}),e.state.curPlatform.getAttribute("id")>2&&!e.state.isScrolling&&(console.log(t),e.startScrolling())):(console.log("did land2"),e.setState({playerJumping:!1,playerFalling:!1,playerLanded:!0,playerIsLanding:!1,speed:1.5}),console.log(e.state.playerFalling))}),{once:!0}),e.setState({playerIsLanding:!0}))},e.checkLanding=function(t){var n=e.getPlayerCurPos(),r=t.getBoundingClientRect();if(n.y+n.height<=r.y){if(n.x>r.left&&n.x<r.right||n.x+n.width>r.left&&n.x+n.width<r.right){var a=r.top-n.height;return a-n.y<100?(e.setState({playerTargetX:n.x,playerTargetY:a,curPlatform:t,speed:.2,playerFalling:!0,playerJumping:!1}),t):(e.setState({playerTargetY:a,curPlatform:t,speed:1,playerFalling:!0,playerJumping:!1}),t)}return!1}return!1},e.checkAllPlatforms=function(){for(var t=null,n=document.querySelectorAll(".platform"),r=!1,a=0;a<n.length;a++)if(t=e.checkLanding(n[a])){r=!0;break}if(!r){var s=e.getPlayerCurPos(),o=window.innerHeight-s.height,l=o-s.y;return l<50?(console.log("faster"+l),e.setState({playerTargetY:o,curPlatform:null,speed:.1,playerFalling:!0,playerJumping:!1}),!1):(e.setState({playerTargetY:o,curPlatform:null,speed:1.5,playerFalling:!0,playerJumping:!1}),!1)}return t},e.startScrolling=function(){var t=document.querySelector(".game");if(!e.state.isScrolling){var n=setInterval((function(){if(t.scrollTop-=e.state.scrollingSpeed,e.state.playerJumping);else if(e.state.playerFalling){var n=e.getPlayerCurPos();if(e.state.playerTargetY+e.state.scrollingAdjustment-n.y<20)return void e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment,speed:.1,playerTargetX:n.x});e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment})}else{var r=e.getPlayerCurPos();e.setState({playerTargetY:e.state.playerTargetY+e.state.scrollingAdjustment,speed:0,playerTargetX:r.x})}}),100);e.setState({isScrolling:!0,scrollingFunc:n})}console.log("scrolling")},e.gameOver=function(){var t=document.getElementById("player");clearInterval(e.state.scrollingFunc),t.style.display="none",console.log("gameOver"),e.setState({gameStatus:!1,points:e.state.curPlatform?1e3*e.state.curPlatform.getAttribute("id"):0})},e.resetGame=function(){document.getElementById("player").style.display="block";var t=e.getPlayerCurPos(),n=window.innerWidth/2-t.width/2;console.log(t.height),console.log(window.innerHeight-t.height);var r=window.innerHeight-t.height;e.setState({gameStatus:!0,playerTargetX:n,playerTargetY:r,playerLanded:!0,playerJumping:!1,playerFalling:!1,playerIsLanding:!1,speed:0,jumpGauge:5,gauge:null,curPlatform:null,isScrolling:!1,scrollingFunc:0,scrollingSpeed:5,scrollingAdjustment:5,points:0})},e.controllerJump=function(t){t?e.setState({gauge:setInterval((function(){e.state.jumpGauge<10&&e.setState((function(e){return{jumpGauge:e.jumpGauge+1}}))}),250)}):(clearInterval(e.state.gauge),e.jump(-840),e.setState({gauge:null,jumpGauge:5}))},e.controllerMovementRight=function(t){if(t){var n=window.innerWidth/2+160,r=e.getPlayerCurPos();r.x+r.width>=n?(console.log("should stop; down rightwalldeath"),e.gameOver(),e.stopMovement({x:n-r.width,y:e.state.playerTargetY},0)):e.lateralMove(window.innerWidth)}else{var a=window.innerWidth/2+160,s=e.getPlayerCurPos();s.x+s.width>=a?(console.log("should stop; up rightwalldeath"),e.gameOver(),e.stopMovement({x:a-s.width,y:e.state.playerTargetY},0)):e.stopMovement(e.getPlayerCurPos()),!0===e.state.playerFalling&&e.land(e.checkAllPlatforms())}},e.controllerMovementLeft=function(t){if(t){var n=window.innerWidth/2-160;e.getPlayerCurPos().x<=n?(console.log("should stop; down leftwalldeath"),e.gameOver(),e.stopMovement({x:n,y:e.state.playerTargetY},0)):(!0===e.state.playerFalling&&e.land(e.checkAllPlatforms()),e.lateralMove(0))}else{var r=window.innerWidth/2-160;if(e.getPlayerCurPos().x<=r)return console.log("should stop; up lefttwalldeath"),e.gameOver(),e.stopMovement({x:r,y:e.state.playerTargetY},0);e.stopMovement(e.getPlayerCurPos()),!0===e.state.playerFalling&&(!0===e.state.playerFalling&&e.land(e.checkAllPlatforms()),e.land(e.checkAllPlatforms()))}},e.handleMobileJump=function(){document.querySelector(".game").addEventListener("touchstart",(function(t){null===e.state.gauge&&"I"!==t.target.nodeName&&e.controllerJump(!0)})),document.querySelector(".game").addEventListener("touchend",(function(t){console.log(t),"I"!==t.target.nodeName&&e.controllerJump(!1)})),document.querySelector(".game").addEventListener("touchmove",(function(e){e.preventDefault()}))},e.handleKeyboardMovement=function(){document.addEventListener("keydown",(function(t){"INPUT"!==document.activeElement.nodeName&&("Space"===t.code?(t.preventDefault(),null===e.state.gauge&&e.controllerJump(!0)):"ArrowRight"===t.code?e.controllerMovementRight(!0):"ArrowLeft"===t.code&&e.controllerMovementLeft(!0))})),document.addEventListener("keyup",(function(t){"INPUT"!==document.activeElement.nodeName&&("Space"===t.code?e.controllerJump(!1):"ArrowRight"===t.code?e.controllerMovementRight(!1):"ArrowLeft"===t.code&&e.controllerMovementLeft(!1))}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mobileCheck()&&Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"gyroscope"})]).then((function(t){if(t.every((function(e){return"granted"===e.state}))){console.log("Permission to use Accelerometer & Gyroscope sensor granted.");var n=new g.a({frequency:30,referenceFrame:"device"});n.start(),n.onreading=function(){var t=e.quaternionToEuler(n.quaternion);if(t>=-.3&&t<=.3){if(e.state.playerTargetX===window.innerWidth)return void e.controllerMovementRight(!1);if(0===e.state.playerTargetX)return void e.controllerMovementRight(!1)}else t>.3?e.controllerMovementRight(!0):t<-.3&&e.controllerMovementLeft(!0)},n.onerror=function(e){return console.log(e.error.name,e.error.message)},e.handleMobileJump()}}));var t=this.getPlayerCurPos(),n=window.innerWidth/2-t.width/2,r=window.innerHeight-t.height;this.setState({playerTargetX:n,playerTargetY:r}),this.handleKeyboardMovement()}},{key:"componentDidUpdate",value:function(e,t){if(console.warn("testingsorry"),console.log(this.props.reset),this.props.reset&&(console.log("reset"),this.state.gameStatus||this.resetGame()),this.state.isScrolling){var n=this.getPlayerCurPos();if(n.y+n.height>=window.innerHeight-25)return console.log("should stop; didupdate bottomdeath"),this.gameOver()}if(this.state.speed<=.2&&(console.log("slowing"),e.playerTargetX!==window.innerWidth&&0!==e.playerTargetX||this.setState({speed:1.5,playerTargetX:e.playerTargetX})),null!==this.state.curPlatform){var r=this.getPlayerCurPos(),a=this.state.curPlatform.getBoundingClientRect();r.x>a.left&&r.x<a.right||r.x+r.width>a.left&&r.x+r.width<a.right||this.state.playerFalling||this.state.playerJumping||!this.state.playerLanded||(this.setState({playerFalling:!0,playerLanded:!1}),this.land(this.checkAllPlatforms()))}}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(P,{status:this.state.gameStatus,points:this.state.points}),Object(h.jsx)(f,{playerInfo:this.state}),Object(h.jsxs)("section",{className:"game",children:[Object(h.jsx)("h1",{className:"inTitle",children:"Tepid Tower"}),Object(h.jsx)("div",{className:"hamburguer--menu",children:Object(h.jsx)("i",{className:"fa fa-bars"})}),Object(h.jsx)(v,{display:this.state.isScrolling}),Object(h.jsx)(b,{status:this.state.gameStatus,curPlatform:this.state.curPlatform?this.state.curPlatform.getAttribute("id"):0,reset:this.props.reset})]})]})}}]),n}(a.a.Component);n(34);var k=function(){return Object(h.jsx)("section",{className:"left--section",children:Object(h.jsx)("h1",{className:"outTitle",children:"Tepid Tower"})})},E=(n(35),"http://localhost:4000"),C=function e(){Object(c.a)(this,e)};C.register=function(e){return fetch("".concat(E,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.login=function(e){return fetch("".concat(E,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.show=function(){return fetch("".concat(E,"/profile"),{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.uid)}}).then((function(e){return e.json()}))},C.edit=function(e){return fetch("".concat(E,"/profile/edit"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.addScore=function(e){return fetch("".concat(E,"/profile/addscore"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.addFriend=function(e){return fetch("".concat(E,"/profile/addfriend"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))},C.delete=function(e){return fetch("".concat(E,"/user/delete"),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.uid)},body:JSON.stringify(e)}).then((function(e){return e.json()}))};var M=C;var N=function(e){var t=Object(l.c)(x),n=Object(i.a)(t,2),a=(n[0],n[1],Object(l.c)(S)),s=Object(i.a)(a,2),o=s[0],c=s[1],u=Object(r.useRef)();Object(r.useEffect)((function(){u.current=o}));var d=u.current;return Object(r.useEffect)((function(){console.log(o),c(e.reset),console.log("reseting game",d,e,o)}),[e]),null};n(36);var A=function(e){return Object(h.jsxs)("div",{className:"controls--modal modal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"CONTROLS"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"USE THE ARROWS KEY TO MOVE"}),Object(h.jsx)("div",{children:"imageofarrowskeys"})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"USE SPACEBAR TO JUMP... THE LONGER YOU HOLD, THE HIGHER YOU WILL JUMP"}),Object(h.jsx)("div",{children:"imageofspacebar"})]})]})},U=(n(37),function e(){Object(c.a)(this,e)});U.showGlobal=function(){return fetch("".concat("http://localhost:4000","/leaderboard/global"),{method:"GET"}).then((function(e){return e.json()}))};var I=U;var L=function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],s=n[1];function o(){I.showGlobal().then((function(e){console.log(e.curProfiles);var t=e.curProfiles;s(t),console.log(a)}))}return Object(r.useEffect)((function(){o()}),[]),Object(h.jsxs)("div",{onClick:function(){o()},className:"leaderboard--modal modal",children:[Object(h.jsx)("h2",{children:"LEADERBOARDS"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsxs)("table",{children:[Object(h.jsx)("colgroup",{children:Object(h.jsx)("col",{style:{backgroundColor:"blue",width:"22px"}})}),Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Username"}),Object(h.jsx)("th",{children:"Score"}),Object(h.jsx)("th",{children:"Country"})]})})]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("table",{children:[Object(h.jsx)("colgroup",{children:Object(h.jsx)("col",{span:"1",style:{backgroundColor:"blue",width:"22px"}})}),Object(h.jsx)("tbody",{children:a.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t+1}),Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.highscore}),Object(h.jsx)("td",{children:e.country})]},"L".concat(t))}))})]})})]})]})};n(38);var R=function(e){var t=Object(l.c)(O),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){console.log(a),console.log(e.user),a!==e.user&&(console.log("setttt"),s(e.user))}),[e]),null},q=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={curUser:void 0,friendEmail:"",username:"e",email:"",country:"",password:""},e.createResponseMessage=function(e){console.log(e);var t=document.createElement("p");return t.appendChild(document.createTextNode(e.message)),t.setAttribute("class","".concat(e.type," message")),t},e.clearInput=function(e,t){var n=document.querySelectorAll(".".concat(e," > * > input"));console.log(n);for(var r=0;r<n.length;r++)console.log(n[r]),t?n[r].name===t&&(n[r].value=n[r]["".concat(n[r].name)]=""):n[r].value=n[r]["".concat(n[r].name)]=""},e.handleSubmit=function(t){if(t.stopPropagation(),t.preventDefault(),console.log(t.target.getAttribute("class")),"signup"===t.target.getAttribute("class")){var n=e.state;delete n.friendEmail,delete n.curUser,M.register(n).then((function(t){console.log(t);var n=document.querySelector(".message");if(n&&n.remove(),t.field)return document.querySelector(".signup").appendChild(e.createResponseMessage(t))})),e.setState({password:""}),e.clearInput("signup","password")}else if("login"===t.target.getAttribute("class"))M.login({email:e.state.email,password:e.state.password}).then((function(t){console.log(t);var n=document.querySelector(".message");return n&&n.remove(),t.field?document.querySelector(".login").appendChild(e.createResponseMessage(t)):(e.setState({curUser:t.foundUser,country:t.foundUser.profile.country,username:t.foundUser.profile.username,password:""}),e.clearInput("login"),e.clearInput("signup"),localStorage.setItem("uid",t.signedJwt),e.props.gameStatus||e.props.isReseting?e.props.changeModal("user--modal--logged"):(console.log(e.props.points),M.addScore({score:e.props.points}).then((function(t){return console.log(t),e.props.changeModal("user--modal--logged")})),void e.props.playAgainFunc(null)))}));else if("edit--user"===t.target.getAttribute("class")){var r=document.querySelector(".message");if(r&&r.remove(),e.state.curUser.profile.username===e.state.username&&e.state.curUser.profile.country===e.state.country)return document.querySelector(".edit--user").appendChild(e.createResponseMessage({type:"error",message:"Profile has no changes."}));M.edit({username:e.state.username,country:e.state.country}).then((function(t){if((console.log(t),t.field)&&(document.querySelector(".edit--user").appendChild(e.createResponseMessage(t)),200!==t.status))return;e.setState({curUser:t.updatedUser,country:t.updatedUser.profile.country,username:t.updatedUser.profile.username})}))}else if("add--friend"===t.target.getAttribute("class")){var a=document.querySelector(".message");if(a&&a.remove(),e.state.friendEmail===e.state.curUser.email)return document.querySelector(".add--friend").appendChild(e.createResponseMessage({type:"error",message:"Please enter different email."}));M.addFriend({friendEmail:e.state.friendEmail}).then((function(t){if(console.log(t),t.field)return 200===t.status&&(console.log("hey"),e.clearInput("add--friend"),e.setState({friendEmail:""})),document.querySelector(".add--friend").appendChild(e.createResponseMessage(t))}))}else t.target.classList.contains("logout")?(e.props.changeModal(""),e.setState({curUser:null,country:"",username:"",email:"",password:""}),localStorage.removeItem("uid")):t.target.classList.contains("delete")&&M.delete().then((function(t){if(console.log(t),t.field)return document.querySelector(".edit--user").appendChild(e.createResponseMessage(t));e.props.changeModal(""),e.setState({curUser:null,country:"",username:"",email:"",password:""}),localStorage.removeItem("uid")}))},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){console.log(this.props.user),console.log(t),void 0===this.state.curUser&&null!==this.props.user&&(console.log("setttt"),this.setState({curUser:this.props.user,country:this.props.user.profile.country,username:this.props.user.profile.username,password:""})),this.state.curUser&&("none"===document.querySelector(".user--modal--logged").style.display&&(this.state.curUser.profile.username===this.state.username&&this.state.curUser.profile.country===this.state.country||this.setState({username:this.state.curUser.profile.username,country:this.state.curUser.profile.country})),this.props.user&&this.props.user.profile.highscore!==this.state.curUser.profile.highscore&&this.setState({curUser:this.props.user}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)(h.Fragment,{children:[void 0!==this.state.curUser?Object(h.jsx)(R,{user:this.state.curUser}):"",Object(h.jsxs)("div",{className:"user--modal modal",children:[Object(h.jsxs)("form",{className:"signup",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"USERNAME"}),Object(h.jsx)("input",{type:"text",name:"username",required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.username})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"EMAIL"}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,onChange:function(t){return e.setState({email:t.target.value})},value:this.email})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"COUNTRY"}),Object(h.jsx)("input",{type:"text",name:"country",required:!0,onChange:function(t){return e.setState({country:t.target.value})},value:this.country})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"PASWORD"}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,onChange:function(t){return e.setState({password:t.target.value})},value:this.password})]}),Object(h.jsx)("input",{type:"submit",value:"Register"})]}),Object(h.jsxs)("form",{className:"login",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"EMAIL"}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,onChange:function(t){return e.setState({email:t.target.value})},value:this.email})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"PASWORD"}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,onChange:function(t){return e.setState({password:t.target.value})},value:this.password})]}),Object(h.jsx)("input",{type:"submit",value:"Login"})]})]}),Object(h.jsxs)("div",{className:"user--modal--logged modal",children:[this.state.curUser?Object(h.jsxs)("h2",{children:["HIGHSCORE: ",this.state.curUser.profile.highscore]}):"",Object(h.jsxs)("form",{className:"edit--user",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"USERNAME"}),Object(h.jsx)("input",{type:"text",name:"username",required:!0,onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username})]}),Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("label",{children:"COUNTRY"}),Object(h.jsx)("input",{type:"text",name:"country",required:!0,onChange:function(t){return e.setState({country:t.target.value})},value:this.state.country})]}),Object(h.jsx)("input",{type:"submit",value:"EDIT INFO"})]}),Object(h.jsxs)("form",{className:"add--friend",onSubmit:this.handleSubmit,children:[Object(h.jsxs)("div",{className:"form--input",children:[Object(h.jsx)("h3",{children:"ADD A FRIEND TO YOUR FRIEND'S LEADERBOARD"}),Object(h.jsx)("input",{type:"email",name:"friendEmail",placeholder:"friend@mail.com",required:!0,onChange:function(t){return e.setState({friendEmail:t.target.value})},value:this.friendEmail})]}),Object(h.jsx)("input",{type:"submit",value:"ADD A FRIEND"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"delete icon",onClick:this.handleSubmit,children:Object(h.jsx)("i",{className:"delete fa fa-trash"})}),Object(h.jsx)("div",{className:"logout icon",onClick:this.handleSubmit,children:Object(h.jsx)("i",{className:"logout  fa fa-sign-out"})})]})]})]})}}]),n}(a.a.Component),F=(n(39),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:!0===this.props.highscore?"gameover--modal highscore modal":"gameover--modal score modal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"h2--title",children:"THE TOWER HAS YOU NOW!"}),Object(h.jsxs)("div",{children:[!0===this.props.highscore?Object(h.jsxs)("h3",{children:["HIGHSCORE: ",this.props.points]}):Object(h.jsxs)("h3",{children:["SCORE: ",this.props.points]}),Object(h.jsx)("button",{className:"playagain",onClick:this.props.playAgainFunc,children:"PLAY AGAIN"})]})]}),null===this.props.user?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"SIGN UP TO ADD YOU SCORE!"}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:this.props.signUpFunc,children:"SIGNUP/LOGIN"})})]}):Object(h.jsx)("div",{children:Object(h.jsxs)("h2",{children:["You are logged in as ",this.props.user.profile.username," !"]})})]})}}]),n}(a.a.Component)),D=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={reset:!1,curUser:null,friendEmail:"",highscore:!1},e.userModal=function(t){var n=!1,r=document.querySelectorAll(".modal");"user--modal--logged"===t&&M.show().then((function(t){console.log(t),e.setState({curUser:t.curUser})}));for(var a=0;a<r.length;a++)if("flex"===r[a].style.display){console.log("is on"),n=!0;break}console.log(t);for(var s=0;s<r.length;s++)if(r[s].classList.contains(t))if("flex"===r[s].style.display){r[s].style.display="none",console.log("off!"),document.querySelector(".landing").removeEventListener("click",e.handleMenuOff);var o=document.querySelector(".message");o&&o.remove()}else r[s].style.display="flex",n||"gameover--modal"===t?n&&"gameover--modal"===t&&document.querySelector(".landing").removeEventListener("click",e.handleMenuOff):(console.log("check"),document.querySelector(".landing").addEventListener("click",e.handleMenuOff));else{r[s].style.display="none";var l=document.querySelector(".message");l&&l.remove()}},e.handleUserOpt=function(t){t.stopPropagation(),e.props.gameStatus&&(e.props.user?(console.log(t.target),e.userModal("user--modal--logged")):(console.log(t.target),e.userModal("user--modal")))},e.handleLeaderboardOpt=function(t){t.stopPropagation(),e.props.gameStatus&&e.userModal("leaderboard--modal")},e.handleControlsOpt=function(t){t.stopPropagation(),e.props.gameStatus&&e.userModal("controls--modal")},e.handleGameRestart=function(t){console.log(t),t&&t.stopPropagation(),e.setState({reset:!0}),e.userModal(""),console.log(e.state.reset)},e.handleHamburguerMenu=function(t){t.preventDefault(),console.log(t.target);var n=t.target.parentElement,r=window.getComputedStyle(n);if(console.log(r.display),"block"===r.display){n.style.display="none";var a=document.querySelectorAll(".icon");console.log(a);for(var s=0;s<a.length;s++)a[s].style.display="inline";document.querySelector(".landing").addEventListener("click",e.handleMenuOff)}},e.handleMenuOff=function(t){if(console.log(t.target.nodeName),console.log(t.target.closest(".modal")),"I"!==t.target.nodeName&&null===t.target.closest(".modal")){var n=document.querySelector(".hamburguer--menu");e.userModal(""),console.log(t.target);var r=document.querySelectorAll(".icon--menu");console.log(r);for(var a=0;a<r.length;a++)r[a].style.display=null;n.style.display=null,document.querySelector(".landing").removeEventListener("click",e.handleMenuOff),console.log("off?")}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){document.querySelector(".hamburguer--menu").addEventListener("touchstart",this.handleHamburguerMenu)}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.user!==e.user&&(console.log("humm"),this.setState({curUser:this.props.user})),console.log(this.props),console.log(this.state),this.props.gameStatus||this.state.reset)this.props.gameStatus&&this.state.reset&&this.setState({reset:!1});else{var n=document.querySelector(".user--modal"),r=document.querySelector(".gameover--modal");if("flex"===n.style.display||"flex"===r.style.display)return;console.log("gameover"),console.log(this.props.points),this.props.user?M.addScore({score:this.props.points}).then((function(e){console.log(e),"score"===e.message?t.setState({highscore:!1}):"highscore"===e.message&&t.setState({highscore:!0,curUser:e.updatedUser})})):this.setState({highscore:!0}),this.userModal("gameover--modal")}}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("section",{className:"section--right",children:[Object(h.jsxs)("aside",{className:"aside--top",children:[Object(h.jsx)("div",{className:"icon icon--menu",children:Object(h.jsx)("i",{className:"fa fa-cog"})}),Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleLeaderboardOpt,children:Object(h.jsx)("i",{className:"fa fa-trophy"})}),Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleControlsOpt,children:Object(h.jsx)("i",{className:"fa fa-gamepad fa-lg"})})]}),Object(h.jsx)("aside",{className:"aside--bottom",children:Object(h.jsx)("div",{className:"icon icon--menu",onClick:this.handleUserOpt,children:Object(h.jsx)("i",{className:"fa fa-user"})})}),Object(h.jsx)(N,{reset:this.state.reset}),Object(h.jsx)(L,{}),Object(h.jsx)(A,{}),Object(h.jsx)(q,{user:this.state.curUser,points:this.props.points,gameStatus:this.props.gameStatus,isReseting:this.state.reset,submitHandler:this.handleSubmit,changeModal:function(t){return e.userModal(t)},playAgainFunc:this.handleGameRestart}),Object(h.jsx)(F,{points:this.props.points,highscore:this.state.highscore,user:this.props.user,playAgainFunc:this.handleGameRestart,signUpFunc:function(){return e.userModal("user--modal")}})]})}}]),n}(a.a.Component);var Y=function(){var e=Object(l.c)(O),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(l.c)(x),o=Object(i.a)(s,2),c=o[0],u=(o[1],Object(l.c)(S)),d=Object(i.a)(u,2),p=d[0],g=(d[1],Object(l.c)(w)),m=Object(i.a)(g,2),f=m[0];return m[1],console.log(p),Object(r.useEffect)((function(){console.log(c),localStorage.uid&&M.show().then((function(e){a(e.curUser)}))}),[]),Object(h.jsxs)("div",{className:"landing",children:[Object(h.jsx)(k,{}),Object(h.jsx)(T,{reset:p}),Object(h.jsx)(D,{user:n,gameStatus:c,points:f})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(l.a,{children:Object(h.jsx)(Y,{})})}),document.getElementById("root")),J()}},[[40,1,2]]]);
//# sourceMappingURL=main.ac364624.chunk.js.map